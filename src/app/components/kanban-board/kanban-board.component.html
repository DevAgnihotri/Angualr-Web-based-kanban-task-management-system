<!-- Kanban Board Header -->
<mat-toolbar color="primary" class="kanban-header">
  <mat-icon>dashboard</mat-icon>
  <span class="header-title">Kanban Task Manager</span>
  <span class="spacer"></span>
  <button 
    mat-raised-button 
    color="accent" 
    class="add-task-btn" 
    [matMenuTriggerFor]="addTaskMenu"
    aria-label="Add new task">
    <mat-icon>add</mat-icon>
    Add Task
    <mat-icon>arrow_drop_down</mat-icon>
  </button>
  
  <!-- Add Task Menu -->
  <mat-menu #addTaskMenu="matMenu" class="add-task-menu">
    <button mat-menu-item (click)="onAddTask('todo')" class="menu-item todo-item">
      <mat-icon class="menu-icon">circle</mat-icon>
      <span>Add to TO-DO</span>
    </button>
    <button mat-menu-item (click)="onAddTask('in-progress')" class="menu-item progress-item">
      <mat-icon class="menu-icon">schedule</mat-icon>
      <span>Add to IN PROGRESS</span>
    </button>
    <button mat-menu-item (click)="onAddTask('done')" class="menu-item done-item">
      <mat-icon class="menu-icon">check_circle</mat-icon>
      <span>Add to DONE</span>
    </button>
  </mat-menu>
</mat-toolbar>

<!-- Kanban Board Container -->
<div class="kanban-container">
  <div class="kanban-board">
    
    <!-- Loop through each column -->
    <div class="kanban-column" *ngFor="let column of columns">
      
      <!-- Column Header -->
      <app-column-header 
        [title]="column.title" 
        [taskCount]="getTaskCount(column.id)"
        [status]="column.status">
      </app-column-header>
      
      <!-- Column Content -->
      <mat-card class="column-card">
        <mat-card-content class="column-content">
          
          <!-- Drop Zone for Tasks -->
          <div 
            class="task-list" 
            [id]="column.id + '-list'"
            cdkDropList
            [cdkDropListData]="column.tasks"
            [cdkDropListConnectedTo]="getConnectedDropLists()"
            (cdkDropListDropped)="onTaskDrop($event)">
            
            <!-- Task Cards -->
            <div *ngFor="let task of column.tasks" class="task-item">
              <div cdkDrag>
                <app-task-card 
                  [task]="task"
                  [isDragging]="false"
                  (editTask)="onEditTask($event)"
                  (deleteTask)="onDeleteTask($event)"
                  (updateTask)="onUpdateTask($event)">
                </app-task-card>
                
                <!-- Custom drag placeholder -->
                <div class="drag-placeholder" *cdkDragPlaceholder>
                  <div class="placeholder-content">
                    <mat-icon>drag_indicator</mat-icon>
                    <span>Drop here</span>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Placeholder when no tasks -->
            <div *ngIf="column.tasks.length === 0" class="empty-column">
              <mat-icon class="empty-icon">inbox</mat-icon>
              <p class="empty-text">Drop tasks here</p>
            </div>
            
          </div>
          
        </mat-card-content>
      </mat-card>
      
    </div>
    
  </div>
</div>
